# Supabase Secrets Setup Script for HeyGen Integration
# Run this script to configure all required Supabase Edge Function secrets

Write-Host "🚀 Setting up Supabase secrets for HeyGen Integration..." -ForegroundColor Cyan

# Check if Supabase CLI is installed
try {
    $supabaseVersion = supabase --version
    Write-Host "✅ Supabase CLI found: $supabaseVersion" -ForegroundColor Green
} catch {
    Write-Host "❌ Supabase CLI not found. Installing..." -ForegroundColor Red
    Write-Host "Please run: npm install -g supabase" -ForegroundColor Yellow
    exit 1
}

# Login to Supabase (if not already logged in)
Write-Host "🔐 Checking Supabase login status..." -ForegroundColor Cyan
try {
    supabase projects list | Out-Null
    Write-Host "✅ Already logged in to Supabase" -ForegroundColor Green
} catch {
    Write-Host "🔑 Please login to Supabase..." -ForegroundColor Yellow
    supabase login
}

# Set HeyGen secrets
Write-Host "📝 Setting HeyGen secrets..." -ForegroundColor Cyan

$heygenApiKey = Read-Host "Enter your HeyGen API Key (get from https://heygen.com)"
if ($heygenApiKey) {
    supabase secrets set HEYGEN_API_KEY=$heygenApiKey
    Write-Host "✅ HEYGEN_API_KEY set successfully" -ForegroundColor Green
} else {
    Write-Host "❌ HeyGen API Key not provided" -ForegroundColor Red
}

supabase secrets set HEYGEN_AVATAR_ID=Marianne_CasualLook_public
Write-Host "✅ HEYGEN_AVATAR_ID set successfully" -ForegroundColor Green

# Set ElevenLabs secrets
Write-Host "📝 Setting ElevenLabs secrets..." -ForegroundColor Cyan

$elevenLabsApiKey = Read-Host "Enter your ElevenLabs API Key (get from https://elevenlabs.io)"
if ($elevenLabsApiKey) {
    supabase secrets set ELEVENLABS_API_KEY=$elevenLabsApiKey
    Write-Host "✅ ELEVENLABS_API_KEY set successfully" -ForegroundColor Green
} else {
    Write-Host "❌ ElevenLabs API Key not provided" -ForegroundColor Red
}

supabase secrets set ELEVENLABS_VOICE_ID=alex-professional-australian
Write-Host "✅ ELEVENLABS_VOICE_ID set successfully" -ForegroundColor Green

#!/bin/bash
echo "📋 Listing all configured secrets..." -ForegroundColor Cyan
supabase secrets list

Write-Host "🎉 Setup complete!" -ForegroundColor Green
Write-Host "" -ForegroundColor White
Write-Host "Next steps:" -ForegroundColor Yellow
Write-Host "1. Create a .env file in your project root" -ForegroundColor White
Write-Host "2. Add the Supabase configuration variables" -ForegroundColor White
Write-Host "3. Restart your development server: npm run dev" -ForegroundColor White
Write-Host "4. Test at: http://localhost:8081/heygen-test" -ForegroundColor White
